(function(){var e={2889:function(e,t,r){"use strict";var o=r(8935),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[],l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{"padding-bottom":"50px"}},[e._v("图片上传")]),r("el-upload",{attrs:{action:"http://127.0.0.1:8881/api/picture/upload","list-type":"picture-card",name:"file","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),r("div",{staticStyle:{"padding-top":"12px"}},[r("el-button",[e._v(" 取消")]),r("el-button",[e._v(" 确认上传")])],1)],1)},i=[],s={name:"Upload",props:{msg:String},data(){return{dialogImageUrl:"",dialogVisible:!1}},methods:{handleRemove(e,t){console.log(e,t)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}}},u=s,c=r(1001),d=(0,c.Z)(u,l,i,!1,null,null,null),p=d.exports,m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{"padding-bottom":"50px"}},[e._v("查看图片")]),r("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},f=[],h={name:"Picture",props:{msg:String},data(){return{dialogImageUrl:"",dialogVisible:!1}},methods:{handleRemove(e,t){console.log(e,t)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}}},v=h,g=(0,c.Z)(v,m,f,!1,null,null,null),b=g.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("header",{staticStyle:{"background-color":"#fff7f7",display:"flex",height:"60px"}},[r("router-link",{staticClass:"route-xxx",attrs:{to:"/home"}},[e._v("首页")]),r("router-link",{staticClass:"route-xxx",attrs:{to:"/upload"}},[e._v("上传")]),r("router-link",{staticClass:"route-xxx",attrs:{to:"/view"}},[e._v("查看")])],1),r("router-view")],1)},y=[],F=(r(1703),{name:"Home",data(){var e=(e,t,r)=>{if(!t)return r(new Error("用户名不能为空"))},t=(e,t,r)=>{""===t?r(new Error("请输入密码")):(""!==this.ruleForm.checkPass&&this.$refs.ruleForm.validateField("checkPass"),r())},r=(e,t,r)=>{""===t?r(new Error("请再次输入密码")):t!==this.ruleForm.pass?r(new Error("两次输入密码不一致!")):r()};return{ruleForm:{pass:"",checkPass:"",name:""},rules:{pass:[{validator:t,trigger:"blur"}],checkPass:[{validator:r,trigger:"blur"}],name:[{validator:e,trigger:"blur"}]}}},methods:{submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;alert("submit!")}))},resetForm(e){this.$refs[e].resetFields()}}}),x=F,P=(0,c.Z)(x,w,y,!1,null,null,null),_=P.exports,k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{display:"inline-block","padding-top":"30px"},attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",e._n(t))},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},E=[],C=r(6166),U=r.n(C),O=r(7421),S=r.n(O);function $(e,t){return new Promise(((r,o)=>{U().post(U().defaults.baseURL+e,t).then((e=>{r(e)}),(e=>{o(e)})).catch((e=>{o(e)}))}))}function L(e){return new Promise(((t,r)=>{U().post(U().defaults.baseURL+e).then((e=>{t(e)}),(e=>{r(e)})).catch((e=>{r(e)}))}))}function j(e,t){return new Promise(((r,o)=>{U().put(U().defaults.baseURL+e,t).then((e=>{r(e)}),(e=>{o(e)})).catch((e=>{o(e)}))}))}function R(e,t){return new Promise(((r,o)=>{U().get(U().defaults.baseURL+e,{params:t}).then((e=>{r(e)}),(e=>{o(e)})).catch((e=>{o(e)}))}))}U().defaults.timeout=5e3,U().defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",U().defaults.headers.put["Content-Type"]="application/json;charset=utf-8",U().defaults.baseURL="http://127.0.0.1:8881",U().interceptors.request.use((e=>("post"===e.method&&(e.data=S().stringify(e.data)),e)),(e=>(console.log("错误的传参"),Promise.reject(e)))),U().interceptors.request.use((e=>("put"===e.method&&(e.data=S().parse(e.data)),e)),(e=>(console.log("错误的传参"),Promise.reject(e)))),U().interceptors.response.use((e=>e.data.success?e:Promise.resolve(e)),(e=>(console.log("网络异常"),Promise.reject(e))));var V={post:$,put:j,get:R,postWithNoParam:L},H=r(311),T=r.n(H),Z={name:"Login",data(){var e=(e,t,r)=>{if(!t)return r(new Error("用户名不能为空"))},t=(e,t,r)=>{""===t?r(new Error("请输入密码")):(""!==this.ruleForm.checkPass&&this.$refs.ruleForm.validateField("checkPass"),r())},r=(e,t,r)=>{""===t?r(new Error("请再次输入密码")):t!==this.ruleForm.pass?r(new Error("两次输入密码不一致!")):r()};return{ruleForm:{pass:"",checkPass:"",name:""},rules:{pass:[{validator:t,trigger:"blur"}],checkPass:[{validator:r,trigger:"blur"}],name:[{validator:e,trigger:"blur"}]}}},methods:{encrypt(e,t,r){t=t||"1grLx91U40VawzhRAm7E";let o=T().enc.Utf8.parse(t),n=T().enc.Utf8.parse(r),a=T().enc.Utf8.parse(e),l=T().AES.encrypt(a,o,{iv:n,mode:T().mode.CBC,padding:T().pad.Pkcs7});return l.toString()},submitForm(e){console.log("deng lu");var t={};t.username=this.ruleForm.name,this.encrypt(this.ruleForm.pass,"Gao2022cm0312dai","Gao2022cm0312dcd"),t.password=this.ruleForm.pass,V.post("/user/login",JSON.stringify(t)).then((e=>{console.log(e),0===e.data.code?this.$router.push("home"):alert("账号密码错误")})).catch((e=>{console.log(e)}))},resetForm(e){this.$refs[e].resetFields()}}},I=Z,q=(0,c.Z)(I,k,E,!1,null,null,null),A=q.exports,M={name:"App",components:{Upload:p,Picture:b,Home:_,Login:A},data(){return{}},mounted(){window.addEventListener("beforeunload",(e=>this.beforeunloadHandler(e))),window.addEventListener("unload",(e=>this.unloadHandler(e)))},destroyed(){window.removeEventListener("beforeunload",(e=>this.beforeunloadHandler(e))),window.removeEventListener("unload",(e=>this.unloadHandler(e)))},methods:{async beforeunloadHandler(e){await this.clearLogin(),window.close()},unloadHandler(){},clearLogin(e){V.postWithNoParam("user/loginOut").then((e=>{console.log("login out"),console.log(e)}))}}},N=M,G=(0,c.Z)(N,n,a,!1,null,null,null),W=G.exports,z=r(4549),B=r.n(z),J=r(2809);o["default"].use(J.Z);const D=new J.Z({routes:[{path:"/",name:"login",component:A},{path:"/home",name:"home",component:_,children:[{path:"/upload",name:"upload",component:p},{path:"/view",name:"view",component:b}]}]});D.beforeEach(((e,t,r)=>{console.log("route to",e.path),r()}));var K=D;o["default"].prototype.$axios=U(),o["default"].prototype.qs=S(),o["default"].use(B()),o["default"].config.productionTip=!1,new o["default"]({router:K,render:e=>e(W)}).$mount("#app")},2480:function(){},4654:function(){}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(t,o,n,a){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],n=e[c][1],a=e[c][2];for(var i=!0,s=0;s<o.length;s++)(!1&a||l>=a)&&Object.keys(r.O).every((function(e){return r.O[e](o[s])}))?o.splice(s--,1):(i=!1,a<l&&(l=a));if(i){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,n,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,a,l=o[0],i=o[1],s=o[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(s)var c=s(r)}for(t&&t(o);u<l.length;u++)a=l[u],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},o=self["webpackChunkwxyun_2_0"]=self["webpackChunkwxyun_2_0"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(2889)}));o=r.O(o)})();